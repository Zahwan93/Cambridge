<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Kebun Ilmu â€” Chemistry MCQ Trainer</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html { scroll-behavior: smooth; }
    body { font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, Arial, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', sans-serif; }
    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.08); }
    .option:hover { transform: translateY(-1px); }
    .choice-correct { border-color: #22c55e !important; background: rgba(34,197,94,.08) !important; }
    .choice-wrong { border-color: #ef4444 !important; background: rgba(239,68,68,.08) !important; }
  </style>
</head>
<body class="min-h-screen bg-slate-900 text-slate-100">
  <!-- Header -->
  <header class="border-b border-white/10 sticky top-0 z-40 bg-slate-900/80 backdrop-blur">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-3">
      <img src="https://zahwan93.github.io/Kebun-Ilmu-Matematika-SMP/logo.png" alt="Kebun Ilmu Logo" class="w-10 h-10 rounded-xl ring-2 ring-white/10"/>
      <div>
        <h1 class="text-xl font-bold leading-tight">Kebun Ilmu â€” IIGCSE Biology (0610)</h1>
        <p class="text-xs text-slate-300">Topical multiple-choice practice â€” interactive & elegant</p>
      </div>
      <div class="ml-auto flex items-center gap-2">
        <button id="btnTheme" class="text-xs px-3 py-1.5 rounded-full bg-white/10 hover:bg-white/20 transition">Theme</button>
        <a href="#import" class="text-xs px-3 py-1.5 rounded-full bg-sky-600 hover:bg-sky-500 transition">Import Questions (JSON)</a>
      </div>
    </div>
  </header>

  <!-- Hero / Controls -->
  <section class="max-w-6xl mx-auto px-4 py-6 grid md:grid-cols-3 gap-4">
    <div class="md:col-span-2 glass p-5 rounded-2xl ring-1 ring-white/10 shadow-xl">
      <h2 class="text-lg font-semibold mb-2">Start a Session</h2>
      <div class="grid sm:grid-cols-2 lg:grid-cols-3 gap-4">
        <label class="block">
          <span class="text-sm text-slate-300">Topic</span>
          <select id="topic" class="mt-1 w-full bg-slate-800 border border-white/10 rounded-xl px-3 py-2">
            <option value="all">All topics</option>
          </select>
        </label>
        <label class="block">
          <span class="text-sm text-slate-300">Number of Questions</span>
          <input id="count" type="number" min="1" max="50" value="10" class="mt-1 w-full bg-slate-800 border border-white/10 rounded-xl px-3 py-2"/>
        </label>
        <label class="block">
          <span class="text-sm text-slate-300">Time (minutes)</span>
          <input id="minutes" type="number" min="0" max="180" value="15" class="mt-1 w-full bg-slate-800 border border-white/10 rounded-xl px-3 py-2"/>
        </label>
        <label class="block">
          <span class="text-sm text-slate-300">Shuffle Options</span>
          <input id="shuffleChoices" type="checkbox" class="align-middle ml-2" checked>
        </label>
        <label class="block">
          <span class="text-sm text-slate-300">Mode</span>
          <select id="mode" class="mt-1 w-full bg-slate-800 border border-white/10 rounded-xl px-3 py-2">
            <option value="practice">Practice (instant feedback)</option>
            <option value="exam">Exam (feedback at the end)</option>
          </select>
        </label>
        <div class="flex items-end">
          <button id="start" class="w-full py-3 rounded-2xl bg-sky-600 hover:bg-sky-500 font-semibold shadow">Start</button>
        </div>
      </div>
      <p class="mt-3 text-xs text-slate-400">Note: To respect copyright, this app does <span class="font-semibold text-slate-200">not include</span> Cambridge IGCSE past paper questions verbatim. Please import your own licensed question bank (see the JSON format below).</p>
      <label class="mt-3 flex items-center gap-2 text-xs text-slate-300">
        <input id="demoToggle" type="checkbox" class="accent-sky-600" checked>
        Enable demo questions (original, IGCSE-style) so you can test the UI now
      </label>
    </div>
    <div class="glass p-5 rounded-2xl ring-1 ring-white/10 shadow-xl">
      <h2 class="text-lg font-semibold mb-2">Stats</h2>
      <div class="grid grid-cols-2 gap-3 text-center">
        <div class="p-3 rounded-xl bg-white/5">
          <div id="statScore" class="text-2xl font-bold">0%</div>
          <div class="text-xs text-slate-300">Score</div>
        </div>
        <div class="p-3 rounded-xl bg-white/5">
          <div id="statProgress" class="text-2xl font-bold">0/0</div>
          <div class="text-xs text-slate-300">Progress</div>
        </div>
        <div class="p-3 rounded-xl bg-white/5">
          <div id="statTime" class="text-2xl font-bold">00:00</div>
          <div class="text-xs text-slate-300">Time Left</div>
        </div>
        <div class="p-3 rounded-xl bg-white/5">
          <div id="statStreak" class="text-2xl font-bold">0ðŸ”¥</div>
          <div class="text-xs text-slate-300">Streak</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Quiz Area -->
  <main class="max-w-5xl mx-auto px-4 pb-24">
    <div id="quiz" class="space-y-4"></div>
    <div id="finish" class="hidden mt-6 p-6 rounded-2xl ring-1 ring-white/10 bg-emerald-900/20">
      <h3 class="text-xl font-bold mb-2">Summary</h3>
      <p id="summary" class="text-sm text-slate-200 mb-3"></p>
      <button id="reviewBtn" class="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20">Review Explanations</button>
      <button id="restartBtn" class="ml-2 px-4 py-2 rounded-xl bg-sky-600 hover:bg-sky-500">Restart</button>
      <details class="mt-3">
        <summary class="cursor-pointer select-none">Export results (JSON)</summary>
        <pre id="exportArea" class="mt-2 text-xs whitespace-pre-wrap"></pre>
      </details>
    </div>
  </main>

  <!-- Import Section -->
  <section id="import" class="max-w-5xl mx-auto px-4 pb-24">
    <div class="glass p-6 rounded-2xl ring-1 ring-white/10">
      <h2 class="text-lg font-semibold">Import Question Bank (JSON)</h2>
      <p class="text-sm text-slate-300 mt-1">Upload a <code>.json</code> file. Your questions will be merged into the current bank.</p>
      <pre class="mt-3 text-xs bg-black/30 p-3 rounded-xl overflow-x-auto"><code>{
  "meta": {"source": "Your licensed past papers", "author": "Your Name"},
  "questions": [
    {
      "id": "unique-001",
      "topic": "Mechanics",
      "paper": "0625/22",
      "session": "May/Jun 2021",
      "qnum": "Q3",
      "question": "<PASTE the exact question text here if you have the rights>",
      "choices": ["A", "B", "C", "D"],
      "answer": 2,
      "explanation": "Your explanation.",
      "tags": ["suv", "kinematics"],
      "image": "(optional image URL)"
    }
  ]
}</code></pre>
      <div class="mt-3 flex items-center gap-3">
        <input id="file" type="file" accept="application/json" class="block w-full text-sm text-slate-200"/>
        <button id="loadFile" class="px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20">Load</button>
      </div>
      <p class="text-xs text-slate-400 mt-2">Reminder: Only import materials you are licensed or permitted to use. This app ships with demo questions that are original (nonâ€‘Cambridge) for testing.</p>
    </div>
  </section>

  <!-- Footer -->
  <footer class="text-center text-xs text-slate-400 py-10">
    Â© <span id="year"></span> Kebun Ilmu â€” IIGCSE Biology (0610) MCQ Trainer. Built with â™¥.
  </footer>

  <!-- Question bank (DEMO original, not copied from past papers). Toggle via #demoToggle. -->
 <script id="demo-bank" type="application/json">{
  "meta": {
    "version": "1.1",
    "note": "Demo questions for UI testing (IGCSE Biology (0610)-style). Includes sample paper/session/Q-number metadata."
  },
  "questions": [
    {
      "id":"demo-bio-1",
      "topic":"Cell Biology",
      "paper":"0610/21",
      "session":"May/Jun 2021",
      "qnum":"Q3",
      "question":"Which organelle is responsible for producing energy in a cell?",
      "choices":["Nucleus","Mitochondria","Ribosomes","Chloroplasts"],
      "answer":1,
      "explanation":"Mitochondria are responsible for cellular respiration, producing energy in the form of ATP.",
      "tags":["cells","organelles"]
    },
    {
      "id":"demo-bio-2",
      "topic":"Photosynthesis",
      "paper":"0610/12",
      "session":"Oct/Nov 2020",
      "qnum":"Q5",
      "question":"Which gas is taken in by plants during photosynthesis?",
      "choices":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],
      "answer":1,
      "explanation":"Plants absorb carbon dioxide (COâ‚‚) from the air to produce glucose and oxygen during photosynthesis.",
      "tags":["photosynthesis","plants"]
    },
    {
      "id":"demo-bio-3",
      "topic":"Enzymes",
      "paper":"0610/42",
      "session":"May/Jun 2019",
      "qnum":"Q8",
      "question":"Which factor can denature enzymes and stop their activity?",
      "choices":["Low temperature","Neutral pH","High temperature","Substrate concentration"],
      "answer":2,
      "explanation":"High temperatures change the shape of the enzyme's active site, causing denaturation and loss of function.",
      "tags":["enzymes","denaturation"]
    },
    {
      "id":"demo-bio-4",
      "topic":"Genetics",
      "paper":"0610/22",
      "session":"Oct/Nov 2021",
      "qnum":"Q6",
      "question":"What is the term for different forms of the same gene?",
      "choices":["Alleles","Chromosomes","Genotypes","Phenotypes"],
      "answer":0,
      "explanation":"Alleles are alternative forms of the same gene that occupy the same position on homologous chromosomes.",
      "tags":["genetics","alleles"]
    },
    {
      "id":"demo-bio-5",
      "topic":"Human Reproduction",
      "paper":"0610/32",
      "session":"May/Jun 2020",
      "qnum":"Q2",
      "question":"Where does fertilisation normally take place in humans?",
      "choices":["Ovary","Uterus","Fallopian tube","Vagina"],
      "answer":2,
      "explanation":"Fertilisation usually occurs in the fallopian tube where the egg meets the sperm.",
      "tags":["reproduction","fertilisation"]
    }
  ]
}</script>




  <!-- Empty bank to receive licensed past-paper content via import -->
  <script id="question-bank" type="application/json">{
  "meta": {
    "version": "1.0",
    "note": "Sample IIGCSE Biology (0610) questions for testing/import."
  },
  "questions": [
    {
      "id":"bio-cell-1",
      "topic":"Cell Biology",
      "paper":"0610/21",
      "session":"May/Jun 2021",
      "qnum":"Q1",
      "question":"Which organelle controls the activities of a cell?",
      "choices":["Nucleus","Mitochondria","Ribosome","Chloroplast"],
      "answer":0,
      "explanation":"The nucleus contains genetic material and controls cell activities.",
      "tags":["cells","organelles"]
    },
    {
      "id":"bio-cell-2",
      "topic":"Cell Biology",
      "paper":"0610/12",
      "session":"Oct/Nov 2020",
      "qnum":"Q2",
      "question":"Which structure is found in plant cells but not in animal cells?",
      "choices":["Nucleus","Cell wall","Mitochondria","Cytoplasm"],
      "answer":1,
      "explanation":"Plant cells have a cell wall made of cellulose; animal cells do not.",
      "tags":["cells","plants"]
    },
    {
      "id":"bio-enzyme-1",
      "topic":"Enzymes",
      "paper":"0610/42",
      "session":"May/Jun 2019",
      "qnum":"Q3",
      "question":"Which factor affects enzyme activity the most?",
      "choices":["Light intensity","pH","Carbon dioxide","Oxygen"],
      "answer":1,
      "explanation":"Enzymes are sensitive to pH; extreme pH levels can denature them.",
      "tags":["enzymes","pH"]
    },
    {
      "id":"bio-enzyme-2",
      "topic":"Enzymes",
      "paper":"0610/22",
      "session":"Oct/Nov 2021",
      "qnum":"Q4",
      "question":"Amylase breaks down starch into which product?",
      "choices":["Glucose","Maltose","Fructose","Lactose"],
      "answer":1,
      "explanation":"Amylase converts starch into maltose, a disaccharide.",
      "tags":["enzymes","digestion"]
    },
    {
      "id":"bio-photo-1",
      "topic":"Photosynthesis",
      "paper":"0610/32",
      "session":"May/Jun 2020",
      "qnum":"Q5",
      "question":"Which gas is required for photosynthesis?",
      "choices":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],
      "answer":1,
      "explanation":"Plants use carbon dioxide in photosynthesis to produce glucose and oxygen.",
      "tags":["photosynthesis","plants"]
    },
    {
      "id":"bio-photo-2",
      "topic":"Photosynthesis",
      "paper":"0610/21",
      "session":"Oct/Nov 2021",
      "qnum":"Q6",
      "question":"What is the main product of photosynthesis?",
      "choices":["Glucose","Oxygen","Starch","Water"],
      "answer":0,
      "explanation":"The main product of photosynthesis is glucose, which is stored or used in respiration.",
      "tags":["photosynthesis","glucose"]
    },
    {
    "id":"bio-resp-1",
    "topic":"Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2021",
    "qnum":"Q1",
    "question":"Which process releases energy in cells?",
    "choices":["Diffusion","Photosynthesis","Respiration","Transpiration"],
    "answer":2,
    "explanation":"Respiration breaks down glucose to release energy in the form of ATP.",
    "tags":["respiration","energy"]
  },
  {
    "id":"bio-resp-2",
    "topic":"Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2020",
    "qnum":"Q2",
    "question":"Which of the following is the main substrate used during respiration?",
    "choices":["Starch","Glucose","Cellulose","Glycogen"],
    "answer":1,
    "explanation":"Glucose is the primary substrate used by cells to release energy through respiration.",
    "tags":["respiration","glucose"]
  },
  {
    "id":"bio-resp-3",
    "topic":"Respiration",
    "paper":"0610/13",
    "session":"May/Jun 2020",
    "qnum":"Q3",
    "question":"In which organelle does aerobic respiration mainly take place?",
    "choices":["Nucleus","Mitochondria","Ribosome","Chloroplast"],
    "answer":1,
    "explanation":"Mitochondria are the 'powerhouses' of the cell where aerobic respiration occurs.",
    "tags":["respiration","mitochondria"]
  },
  {
    "id":"bio-resp-4",
    "topic":"Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2021",
    "qnum":"Q4",
    "question":"Which of the following best describes respiration?",
    "choices":["The intake of oxygen","The release of carbon dioxide","The breakdown of glucose to release energy","The movement of water across membranes"],
    "answer":2,
    "explanation":"Respiration involves the breakdown of glucose to release usable energy in the form of ATP.",
    "tags":["respiration","definition"]
  },
  {
    "id":"bio-resp-5",
    "topic":"Respiration",
    "paper":"0610/42",
    "session":"May/Jun 2019",
    "qnum":"Q5",
    "question":"What is the main purpose of respiration?",
    "choices":["To produce oxygen","To produce glucose","To release energy","To form enzymes"],
    "answer":2,
    "explanation":"The energy released from respiration is used for processes like movement, growth, and repair.",
    "tags":["respiration","purpose"]
  },
  {
    "id":"bio-resp-6",
    "topic":"Respiration",
    "paper":"0610/12",
    "session":"Oct/Nov 2022",
    "qnum":"Q6",
    "question":"Which gas is a waste product of aerobic respiration?",
    "choices":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],
    "answer":1,
    "explanation":"Carbon dioxide is produced when glucose is completely oxidized during aerobic respiration.",
    "tags":["respiration","waste"]
  },
  {
    "id":"bio-resp-7",
    "topic":"Respiration",
    "paper":"0610/22",
    "session":"May/Jun 2021",
    "qnum":"Q7",
    "question":"Which statement is correct about respiration?",
    "choices":["It only happens in plants","It only happens in animals","It happens in all living cells","It happens only in the presence of sunlight"],
    "answer":2,
    "explanation":"Respiration occurs in all living cells, both plants and animals, to provide energy for life processes.",
    "tags":["respiration","cells"]
  },
  {
    "id":"bio-resp-8",
    "topic":"Respiration",
    "paper":"0610/32",
    "session":"Oct/Nov 2020",
    "qnum":"Q8",
    "question":"Which of the following correctly describes the role of ATP in cells?",
    "choices":["Stores genetic information","Transfers energy","Produces oxygen","Absorbs glucose"],
    "answer":1,
    "explanation":"ATP stores and transfers energy released during respiration for cellular activities.",
    "tags":["respiration","ATP"]
  },
  {
    "id":"bio-resp-9",
    "topic":"Respiration",
    "paper":"0610/42",
    "session":"May/Jun 2020",
    "qnum":"Q9",
    "question":"Which statement is true about energy from respiration?",
    "choices":["It is stored as heat","It is released as ATP","It is stored in chlorophyll","It is released only during sleep"],
    "answer":1,
    "explanation":"The main form of usable energy from respiration is stored in ATP molecules.",
    "tags":["respiration","ATP"]
  },
  {
    "id":"bio-resp-10",
    "topic":"Respiration",
    "paper":"0610/13",
    "session":"Oct/Nov 2021",
    "qnum":"Q10",
    "question":"What happens to glucose molecules during respiration?",
    "choices":["They are broken down to release energy","They are stored as glycogen","They are converted into chlorophyll","They remain unchanged"],
    "answer":0,
    "explanation":"Glucose molecules are broken down step by step to release energy for cell functions.",
    "tags":["respiration","glucose"]
  },
{
    "id":"bio-aero-1",
    "topic":"Aerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2021",
    "qnum":"Q1",
    "question":"Which of the following is the overall word equation for aerobic respiration?",
    "choices":["Glucose â†’ Lactic acid + Energy","Glucose + Oxygen â†’ Carbon dioxide + Water + Energy","Glucose â†’ Ethanol + Carbon dioxide + Energy","Glucose + Carbon dioxide â†’ Oxygen + Energy"],
    "answer":1,
    "explanation":"Aerobic respiration uses oxygen to completely break down glucose into carbon dioxide and water, releasing energy.",
    "tags":["aerobic","equation"]
  },
  {
    "id":"bio-aero-2",
    "topic":"Aerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2020",
    "qnum":"Q2",
    "question":"Which organelle is the site of aerobic respiration?",
    "choices":["Chloroplast","Mitochondria","Nucleus","Ribosome"],
    "answer":1,
    "explanation":"Mitochondria are the main site where aerobic respiration occurs.",
    "tags":["aerobic","mitochondria"]
  },
  {
    "id":"bio-aero-3",
    "topic":"Aerobic Respiration",
    "paper":"0610/13",
    "session":"May/Jun 2020",
    "qnum":"Q3",
    "question":"What is the main purpose of oxygen in aerobic respiration?",
    "choices":["To combine with glucose","To accept electrons at the end of the electron transport chain","To produce ATP directly","To form carbon dioxide"],
    "answer":1,
    "explanation":"Oxygen acts as the final electron acceptor in the electron transport chain, allowing ATP production.",
    "tags":["aerobic","oxygen"]
  },
  {
    "id":"bio-aero-4",
    "topic":"Aerobic Respiration",
    "paper":"0610/42",
    "session":"Oct/Nov 2021",
    "qnum":"Q4",
    "question":"Which statement about aerobic respiration is correct?",
    "choices":["It produces more energy than anaerobic respiration","It occurs in the cytoplasm only","It produces lactic acid","It does not require oxygen"],
    "answer":0,
    "explanation":"Aerobic respiration releases more ATP per glucose molecule than anaerobic respiration.",
    "tags":["aerobic","energy"]
  },
  {
    "id":"bio-aero-5",
    "topic":"Aerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2019",
    "qnum":"Q5",
    "question":"Which of the following is a product of aerobic respiration?",
    "choices":["Lactic acid","Ethanol","Carbon dioxide","Glucose"],
    "answer":2,
    "explanation":"Carbon dioxide and water are products of aerobic respiration.",
    "tags":["aerobic","products"]
  },
  {
    "id":"bio-aero-6",
    "topic":"Aerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2018",
    "qnum":"Q6",
    "question":"Which process produces the most ATP molecules per glucose molecule?",
    "choices":["Anaerobic respiration","Aerobic respiration","Fermentation","Photosynthesis"],
    "answer":1,
    "explanation":"Aerobic respiration produces about 36â€“38 ATP molecules per glucose, more than anaerobic processes.",
    "tags":["aerobic","ATP"]
  },
  {
    "id":"bio-aero-7",
    "topic":"Aerobic Respiration",
    "paper":"0610/32",
    "session":"May/Jun 2020",
    "qnum":"Q7",
    "question":"Which gas is consumed during aerobic respiration?",
    "choices":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],
    "answer":0,
    "explanation":"Oxygen is required for the complete oxidation of glucose in aerobic respiration.",
    "tags":["aerobic","oxygen"]
  },
  {
    "id":"bio-aero-8",
    "topic":"Aerobic Respiration",
    "paper":"0610/42",
    "session":"Oct/Nov 2019",
    "qnum":"Q8",
    "question":"Which stage of aerobic respiration produces the most ATP?",
    "choices":["Glycolysis","Link reaction","Krebs cycle","Electron transport chain"],
    "answer":3,
    "explanation":"The electron transport chain generates the majority of ATP in aerobic respiration.",
    "tags":["aerobic","ATP"]
  },
  {
    "id":"bio-aero-9",
    "topic":"Aerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2021",
    "qnum":"Q9",
    "question":"During aerobic respiration, which molecule stores energy in a form usable by the cell?",
    "choices":["ATP","Glucose","Oxygen","Carbon dioxide"],
    "answer":0,
    "explanation":"ATP stores and transfers energy for cellular activities.",
    "tags":["aerobic","ATP"]
  },
  {
    "id":"bio-aero-10",
    "topic":"Aerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2021",
    "qnum":"Q10",
    "question":"Which of the following correctly describes aerobic respiration?",
    "choices":["Glucose is partially broken down to release energy","Glucose is completely oxidized to release maximum energy","It occurs without oxygen","It produces lactic acid"],
    "answer":1,
    "explanation":"Aerobic respiration completely oxidizes glucose to produce carbon dioxide, water, and maximum ATP.",
    "tags":["aerobic","definition"]
  },
{
    "id":"bio-anaero-1",
    "topic":"Anaerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2021",
    "qnum":"Q1",
    "question":"Which of the following is the main difference between aerobic and anaerobic respiration?",
    "choices":["Anaerobic respiration uses oxygen","Anaerobic respiration produces more ATP","Anaerobic respiration produces lactic acid or ethanol","Anaerobic respiration occurs in mitochondria only"],
    "answer":2,
    "explanation":"Anaerobic respiration occurs without oxygen and produces either lactic acid (in animals) or ethanol and carbon dioxide (in plants/yeast).",
    "tags":["anaerobic","comparison"]
  },
  {
    "id":"bio-anaero-2",
    "topic":"Anaerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2020",
    "qnum":"Q2",
    "question":"What is the word equation for anaerobic respiration in human muscle cells?",
    "choices":["Glucose â†’ Ethanol + COâ‚‚","Glucose â†’ Lactic acid","Glucose + Oxygen â†’ COâ‚‚ + Water","Glucose â†’ ATP + Water"],
    "answer":1,
    "explanation":"In human muscles, anaerobic respiration produces lactic acid when oxygen is in short supply.",
    "tags":["anaerobic","humans"]
  },
  {
    "id":"bio-anaero-3",
    "topic":"Anaerobic Respiration",
    "paper":"0610/13",
    "session":"May/Jun 2020",
    "qnum":"Q3",
    "question":"Which type of cell performs anaerobic respiration when oxygen is limited?",
    "choices":["Plant cells","Animal cells","Yeast cells","All of the above"],
    "answer":3,
    "explanation":"Many types of cells can respire anaerobically when oxygen is insufficient.",
    "tags":["anaerobic","cells"]
  },
  {
    "id":"bio-anaero-4",
    "topic":"Anaerobic Respiration",
    "paper":"0610/42",
    "session":"Oct/Nov 2021",
    "qnum":"Q4",
    "question":"What is a disadvantage of anaerobic respiration compared to aerobic respiration?",
    "choices":["It produces less energy per glucose molecule","It requires oxygen","It produces only water","It occurs only in plants"],
    "answer":0,
    "explanation":"Anaerobic respiration produces much less ATP per glucose than aerobic respiration.",
    "tags":["anaerobic","energy"]
  },
  {
    "id":"bio-anaero-5",
    "topic":"Anaerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2019",
    "qnum":"Q5",
    "question":"Which substance accumulates in muscles during intense exercise due to anaerobic respiration?",
    "choices":["Carbon dioxide","Ethanol","Lactic acid","ATP"],
    "answer":2,
    "explanation":"Lactic acid builds up when muscles respire anaerobically, causing fatigue.",
    "tags":["anaerobic","lactic acid"]
  },
  {
    "id":"bio-anaero-6",
    "topic":"Anaerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2018",
    "qnum":"Q6",
    "question":"Which gas is produced during anaerobic respiration in yeast?",
    "choices":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],
    "answer":1,
    "explanation":"Yeast produces ethanol and carbon dioxide during anaerobic fermentation.",
    "tags":["anaerobic","yeast"]
  },
  {
    "id":"bio-anaero-7",
    "topic":"Anaerobic Respiration",
    "paper":"0610/32",
    "session":"May/Jun 2020",
    "qnum":"Q7",
    "question":"Why does anaerobic respiration occur in muscle cells?",
    "choices":["Because oxygen is abundant","Because oxygen is lacking","To produce more ATP than aerobic respiration","To release COâ‚‚ rapidly"],
    "answer":1,
    "explanation":"When oxygen supply is insufficient for aerobic respiration, muscles switch to anaerobic respiration to release some energy.",
    "tags":["anaerobic","muscles"]
  },
  {
    "id":"bio-anaero-8",
    "topic":"Anaerobic Respiration",
    "paper":"0610/42",
    "session":"Oct/Nov 2019",
    "qnum":"Q8",
    "question":"Which of the following is an advantage of anaerobic respiration?",
    "choices":["It produces maximum ATP","It allows energy release when oxygen is limited","It produces water instead of lactic acid","It is more efficient than aerobic respiration"],
    "answer":1,
    "explanation":"Anaerobic respiration allows cells to release energy when oxygen is in short supply, even if less efficiently.",
    "tags":["anaerobic","advantage"]
  },
  {
    "id":"bio-anaero-9",
    "topic":"Anaerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2021",
    "qnum":"Q9",
    "question":"Which equation represents anaerobic respiration in yeast cells?",
    "choices":["Glucose â†’ Lactic acid","Glucose â†’ Ethanol + Carbon dioxide","Glucose + Oxygen â†’ COâ‚‚ + Water","Glucose â†’ ATP + Water"],
    "answer":1,
    "explanation":"Yeast ferments glucose anaerobically to produce ethanol and carbon dioxide.",
    "tags":["anaerobic","yeast"]
  },
  {
    "id":"bio-anaero-10",
    "topic":"Anaerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2021",
    "qnum":"Q10",
    "question":"Which of the following statements is true about anaerobic respiration?",
    "choices":["It produces more energy than aerobic respiration","It produces lactic acid in human muscles","It requires oxygen","It occurs in mitochondria only"],
    "answer":1,
    "explanation":"In humans, anaerobic respiration produces lactic acid in muscles when oxygen is insufficient.",
    "tags":["anaerobic","lactic acid"]
  },
{
    "id":"bio-resp-11",
    "topic":"Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2022",
    "qnum":"Q11",
    "question":"Which statement best describes the process of respiration?",
    "choices":["It produces energy directly","It breaks down glucose to release energy","It stores oxygen in cells","It only happens in plants"],
    "answer":1,
    "explanation":"Respiration breaks down glucose in cells to release energy stored in ATP molecules.",
    "tags":["respiration","energy"]
  },
  {
    "id":"bio-resp-12",
    "topic":"Respiration",
    "paper":"0610/21",
    "session":"Oct/Nov 2021",
    "qnum":"Q12",
    "question":"Where does respiration occur inside a cell?",
    "choices":["Nucleus","Mitochondria","Cytoplasm","Ribosomes"],
    "answer":1,
    "explanation":"The mitochondria are the main site of aerobic respiration in eukaryotic cells.",
    "tags":["respiration","mitochondria"]
  },
  {
    "id":"bio-resp-13",
    "topic":"Respiration",
    "paper":"0610/42",
    "session":"May/Jun 2020",
    "qnum":"Q13",
    "question":"Which of the following processes in living organisms requires energy from respiration?",
    "choices":["Diffusion","Active transport","Osmosis","Evaporation"],
    "answer":1,
    "explanation":"Active transport uses ATP from respiration to move substances against the concentration gradient.",
    "tags":["respiration","ATP"]
  },
  {
    "id":"bio-resp-14",
    "topic":"Respiration",
    "paper":"0610/32",
    "session":"Oct/Nov 2020",
    "qnum":"Q14",
    "question":"Which gas is always produced in aerobic respiration?",
    "choices":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],
    "answer":1,
    "explanation":"Carbon dioxide is a waste product of aerobic respiration in both plants and animals.",
    "tags":["respiration","gas exchange"]
  },
  {
    "id":"bio-resp-15",
    "topic":"Respiration",
    "paper":"0610/11",
    "session":"May/Jun 2021",
    "qnum":"Q15",
    "question":"Which molecule stores the energy released from respiration?",
    "choices":["Glucose","ATP","DNA","Starch"],
    "answer":1,
    "explanation":"Energy from glucose breakdown is stored in ATP molecules and used for cellular activities.",
    "tags":["respiration","ATP"]
  },
  {
    "id":"bio-resp-16",
    "topic":"Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2022",
    "qnum":"Q16",
    "question":"Which statement explains why respiration is important in humans?",
    "choices":["It absorbs carbon dioxide","It stores energy in glucose","It provides energy for metabolism","It creates oxygen in cells"],
    "answer":2,
    "explanation":"Respiration releases energy from glucose to fuel metabolism and essential life processes.",
    "tags":["respiration","humans"]
  },
  {
    "id":"bio-resp-17",
    "topic":"Respiration",
    "paper":"0610/32",
    "session":"May/Jun 2019",
    "qnum":"Q17",
    "question":"Which of these is an example of a process that needs energy from respiration?",
    "choices":["Protein synthesis","Photosynthesis","Diffusion","Osmosis"],
    "answer":0,
    "explanation":"Protein synthesis requires energy in the form of ATP from respiration to link amino acids.",
    "tags":["respiration","metabolism"]
  },
  {
    "id":"bio-resp-18",
    "topic":"Respiration",
    "paper":"0610/12",
    "session":"Oct/Nov 2021",
    "qnum":"Q18",
    "question":"Why does the rate of respiration increase during exercise?",
    "choices":["More glucose is stored","More carbon dioxide is produced","More energy is needed for muscle contraction","Less oxygen is needed"],
    "answer":2,
    "explanation":"Muscles require more energy during exercise, so respiration rate increases.",
    "tags":["respiration","exercise"]
  },
  {
    "id":"bio-resp-19",
    "topic":"Respiration",
    "paper":"0610/42",
    "session":"May/Jun 2020",
    "qnum":"Q19",
    "question":"Which of the following is NOT a product of aerobic respiration?",
    "choices":["Carbon dioxide","Water","Lactic acid","Energy"],
    "answer":2,
    "explanation":"Lactic acid is produced in anaerobic respiration, not aerobic respiration.",
    "tags":["respiration","aerobic"]
  },
  {
    "id":"bio-resp-20",
    "topic":"Respiration",
    "paper":"0610/32",
    "session":"Oct/Nov 2019",
    "qnum":"Q20",
    "question":"Which organelle is nicknamed the 'powerhouse of the cell' because of respiration?",
    "choices":["Chloroplast","Nucleus","Mitochondrion","Golgi body"],
    "answer":2,
    "explanation":"Mitochondria are the site of aerobic respiration and produce most of the ATP in cells.",
    "tags":["respiration","mitochondria"]
  },
{
    "id":"bio-aero-11",
    "topic":"Aerobic Respiration",
    "paper":"0610/22",
    "session":"May/Jun 2022",
    "qnum":"Q21",
    "question":"Which word equation represents aerobic respiration?",
    "choices":["Glucose â†’ Lactic acid + Energy","Glucose + Oxygen â†’ Carbon dioxide + Water + Energy","Glucose â†’ Ethanol + Carbon dioxide + Energy","Oxygen + Carbon dioxide â†’ Glucose + Energy"],
    "answer":1,
    "explanation":"In aerobic respiration, glucose reacts with oxygen to release energy, carbon dioxide, and water.",
    "tags":["aerobic","equation"]
  },
  {
    "id":"bio-aero-12",
    "topic":"Aerobic Respiration",
    "paper":"0610/42",
    "session":"Oct/Nov 2021",
    "qnum":"Q22",
    "question":"Where in the cell does most aerobic respiration occur?",
    "choices":["Cytoplasm","Mitochondria","Nucleus","Ribosomes"],
    "answer":1,
    "explanation":"The mitochondria are the site of aerobic respiration, producing large amounts of ATP.",
    "tags":["aerobic","mitochondria"]
  },
  {
    "id":"bio-aero-13",
    "topic":"Aerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2021",
    "qnum":"Q23",
    "question":"Why does aerobic respiration release more energy than anaerobic respiration?",
    "choices":["It breaks down glucose completely","It produces lactic acid","It happens faster","It does not use oxygen"],
    "answer":0,
    "explanation":"Aerobic respiration fully oxidizes glucose, producing much more ATP compared to anaerobic respiration.",
    "tags":["aerobic","energy"]
  },
  {
    "id":"bio-aero-14",
    "topic":"Aerobic Respiration",
    "paper":"0610/32",
    "session":"May/Jun 2020",
    "qnum":"Q24",
    "question":"Which of these is a product of aerobic respiration?",
    "choices":["Carbon dioxide","Lactic acid","Ethanol","Nitrogen"],
    "answer":0,
    "explanation":"Carbon dioxide is a waste product of aerobic respiration in both plants and animals.",
    "tags":["aerobic","gas exchange"]
  },
  {
    "id":"bio-aero-15",
    "topic":"Aerobic Respiration",
    "paper":"0610/12",
    "session":"Oct/Nov 2020",
    "qnum":"Q25",
    "question":"During exercise, why does the breathing rate increase?",
    "choices":["To reduce body temperature","To supply more oxygen to muscles","To remove nitrogen faster","To produce less ATP"],
    "answer":1,
    "explanation":"During exercise, muscles need more oxygen for aerobic respiration to release energy for contractions.",
    "tags":["aerobic","exercise"]
  },
  {
    "id":"bio-aero-16",
    "topic":"Aerobic Respiration",
    "paper":"0610/32",
    "session":"Oct/Nov 2019",
    "qnum":"Q26",
    "question":"What is the main advantage of aerobic respiration?",
    "choices":["It uses less oxygen","It produces ethanol","It releases large amounts of energy","It is faster than anaerobic respiration"],
    "answer":2,
    "explanation":"Aerobic respiration provides a high yield of ATP compared to anaerobic respiration.",
    "tags":["aerobic","ATP"]
  },
  {
    "id":"bio-aero-17",
    "topic":"Aerobic Respiration",
    "paper":"0610/21",
    "session":"May/Jun 2021",
    "qnum":"Q27",
    "question":"Which process supplies the oxygen needed for aerobic respiration?",
    "choices":["Photosynthesis","Diffusion into cells","Fermentation","Active transport"],
    "answer":1,
    "explanation":"Oxygen required for aerobic respiration enters the blood through diffusion in the alveoli.",
    "tags":["aerobic","oxygen"]
  },
  {
    "id":"bio-aero-18",
    "topic":"Aerobic Respiration",
    "paper":"0610/42",
    "session":"May/Jun 2022",
    "qnum":"Q28",
    "question":"Why is aerobic respiration essential for brain function?",
    "choices":["The brain stores oxygen","The brain requires constant energy supply","The brain produces lactic acid","The brain produces glucose"],
    "answer":1,
    "explanation":"The brain has a high energy demand and depends on aerobic respiration for ATP production.",
    "tags":["aerobic","brain"]
  },
  {
    "id":"bio-aero-19",
    "topic":"Aerobic Respiration",
    "paper":"0610/32",
    "session":"Oct/Nov 2021",
    "qnum":"Q29",
    "question":"Which gas exchange occurs during aerobic respiration in humans?",
    "choices":["Oxygen diffuses out, carbon dioxide in","Oxygen diffuses in, carbon dioxide out","Carbon dioxide diffuses in only","Only oxygen diffuses in"],
    "answer":1,
    "explanation":"Oxygen enters the bloodstream for aerobic respiration while carbon dioxide is released as waste.",
    "tags":["aerobic","gas exchange"]
  },
  {
    "id":"bio-aero-20",
    "topic":"Aerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2020",
    "qnum":"Q30",
    "question":"Which factor directly increases the rate of aerobic respiration?",
    "choices":["Lower temperature","Higher oxygen availability","Lower glucose concentration","Reduced ATP demand"],
    "answer":1,
    "explanation":"Increasing oxygen supply allows faster aerobic respiration, producing more ATP for cell activities.",
    "tags":["aerobic","rate"]
  },
{
    "id":"bio-anaero-1",
    "topic":"Anaerobic Respiration",
    "paper":"0610/12",
    "session":"May/Jun 2022",
    "qnum":"Q31",
    "question":"Which statement about anaerobic respiration is correct?",
    "choices":["It requires oxygen","It releases less energy than aerobic respiration","It occurs only in plants","It produces only water"],
    "answer":1,
    "explanation":"Anaerobic respiration produces less ATP because glucose is not completely broken down.",
    "tags":["anaerobic","energy"]
  },
  {
    "id":"bio-anaero-2",
    "topic":"Anaerobic Respiration",
    "paper":"0610/42",
    "session":"Oct/Nov 2021",
    "qnum":"Q32",
    "question":"In humans, what is the main product of anaerobic respiration?",
    "choices":["Carbon dioxide","Lactic acid","Ethanol","Oxygen"],
    "answer":1,
    "explanation":"In humans, anaerobic respiration converts glucose into lactic acid when oxygen is insufficient.",
    "tags":["anaerobic","lactic acid"]
  },
  {
    "id":"bio-anaero-3",
    "topic":"Anaerobic Respiration",
    "paper":"0610/32",
    "session":"May/Jun 2020",
    "qnum":"Q33",
    "question":"Which word equation represents anaerobic respiration in yeast?",
    "choices":["Glucose â†’ Ethanol + Carbon dioxide + Energy","Glucose + Oxygen â†’ Water + Energy","Glucose â†’ Lactic acid + Energy","Oxygen + Carbon dioxide â†’ Glucose + Energy"],
    "answer":0,
    "explanation":"In yeast, glucose is broken down anaerobically into ethanol, carbon dioxide, and small amounts of energy.",
    "tags":["anaerobic","yeast"]
  },
  {
    "id":"bio-anaero-4",
    "topic":"Anaerobic Respiration",
    "paper":"0610/21",
    "session":"Oct/Nov 2020",
    "qnum":"Q34",
    "question":"Why do muscles switch to anaerobic respiration during intense exercise?",
    "choices":["Oxygen supply cannot meet demand","Glucose is not available","It produces more ATP","Lactic acid must be removed"],
    "answer":0,
    "explanation":"When oxygen supply is limited, muscles switch to anaerobic respiration to produce ATP quickly.",
    "tags":["anaerobic","exercise"]
  },
  {
    "id":"bio-anaero-5",
    "topic":"Anaerobic Respiration",
    "paper":"0610/42",
    "session":"May/Jun 2021",
    "qnum":"Q35",
    "question":"Which of the following happens due to lactic acid buildup?",
    "choices":["Increased oxygen uptake","Muscle fatigue","Higher ATP production","More carbon dioxide released"],
    "answer":1,
    "explanation":"Lactic acid accumulation lowers muscle pH, leading to fatigue and pain after intense exercise.",
    "tags":["anaerobic","lactic acid"]
  },
  {
    "id":"bio-anaero-6",
    "topic":"Anaerobic Respiration",
    "paper":"0610/22",
    "session":"Oct/Nov 2021",
    "qnum":"Q36",
    "question":"How is the oxygen debt repaid after vigorous exercise?",
    "choices":["By increasing glucose intake","By breathing rapidly to oxidize lactic acid","By storing more ATP","By producing more carbon dioxide"],
    "answer":1,
    "explanation":"After exercise, rapid breathing supplies oxygen to break down lactic acid into carbon dioxide and water.",
    "tags":["anaerobic","oxygen debt"]
  },
  {
    "id":"bio-anaero-7",
    "topic":"Anaerobic Respiration",
    "paper":"0610/32",
    "session":"May/Jun 2022",
    "qnum":"Q37",
    "question":"In which organisms does anaerobic respiration produce ethanol?",
    "choices":["Humans only","Yeast only","Plants only","Both yeast and humans"],
    "answer":1,
    "explanation":"Yeast performs alcoholic fermentation, producing ethanol and carbon dioxide in the absence of oxygen.",
    "tags":["anaerobic","ethanol"]
  },
  {
    "id":"bio-anaero-8",
    "topic":"Anaerobic Respiration",
    "paper":"0610/12",
    "session":"Oct/Nov 2020",
    "qnum":"Q38",
    "question":"Which statement compares aerobic and anaerobic respiration correctly?",
    "choices":["Anaerobic respiration produces more ATP","Aerobic respiration produces lactic acid","Anaerobic respiration occurs when oxygen is lacking","Aerobic respiration occurs without oxygen"],
    "answer":2,
    "explanation":"Anaerobic respiration is used when oxygen is unavailable, producing less ATP than aerobic respiration.",
    "tags":["anaerobic","comparison"]
  },
  {
    "id":"bio-anaero-9",
    "topic":"Anaerobic Respiration",
    "paper":"0610/42",
    "session":"May/Jun 2022",
    "qnum":"Q39",
    "question":"What is the main disadvantage of anaerobic respiration in humans?",
    "choices":["It requires more oxygen","It releases less energy and causes lactic acid buildup","It produces ethanol","It speeds up muscle recovery"],
    "answer":1,
    "explanation":"Anaerobic respiration is less efficient and leads to lactic acid accumulation, which causes muscle fatigue.",
    "tags":["anaerobic","disadvantage"]
  },
  {
    "id":"bio-anaero-10",
    "topic":"Anaerobic Respiration",
    "paper":"0610/21",
    "session":"Oct/Nov 2021",
    "qnum":"Q40",
    "question":"Why do sprinters often experience an oxygen debt after a race?",
    "choices":["They breathe too slowly","Glucose is unavailable","Anaerobic respiration produces lactic acid","Oxygen cannot diffuse into cells"],
    "answer":2,
    "explanation":"During short bursts of intense activity, oxygen supply is insufficient, leading to lactic acid accumulation and oxygen debt.",
    "tags":["anaerobic","sports"]
  },
        {
      "id":"bio-genetics-1",
      "topic":"Genetics",
      "paper":"0610/23",
      "session":"May/Jun 2019",
      "qnum":"Q9",
      "question":"What is the term for different versions of the same gene?",
      "choices":["Chromosomes","Alleles","Genotypes","Phenotypes"],
      "answer":1,
      "explanation":"Alleles are variations of the same gene located at the same locus on a chromosome.",
      "tags":["genetics","alleles"]
    },
    {
      "id":"bio-genetics-2",
      "topic":"Genetics",
      "paper":"0610/11",
      "session":"Oct/Nov 2021",
      "qnum":"Q10",
      "question":"Which genetic material carries instructions for making proteins?",
      "choices":["RNA","DNA","Chromosomes","Ribosomes"],
      "answer":1,
      "explanation":"DNA carries the genetic code used to produce proteins during transcription and translation.",
      "tags":["genetics","dna"]
    },
    {
      "id":"bio-repro-1",
      "topic":"Human Reproduction",
      "paper":"0610/22",
      "session":"May/Jun 2018",
      "qnum":"Q11",
      "question":"Where does fertilisation usually take place in humans?",
      "choices":["Uterus","Ovary","Fallopian tube","Vagina"],
      "answer":2,
      "explanation":"Fertilisation normally occurs in the fallopian tube.",
      "tags":["reproduction","fertilisation"]
    },
    {
      "id":"bio-repro-2",
      "topic":"Human Reproduction",
      "paper":"0610/13",
      "session":"Oct/Nov 2020",
      "qnum":"Q12",
      "question":"Which hormone controls the menstrual cycle?",
      "choices":["Adrenaline","Testosterone","Oestrogen","Insulin"],
      "answer":2,
      "explanation":"Oestrogen regulates the menstrual cycle along with progesterone.",
      "tags":["hormones","menstrual"]
    },
    {
      "id":"bio-homeo-1",
      "topic":"Homeostasis",
      "paper":"0610/32",
      "session":"May/Jun 2021",
      "qnum":"Q13",
      "question":"Which organ controls blood glucose concentration?",
      "choices":["Liver","Kidneys","Pancreas","Heart"],
      "answer":2,
      "explanation":"The pancreas releases insulin and glucagon to regulate blood glucose levels.",
      "tags":["homeostasis","glucose"]
    },
    {
      "id":"bio-homeo-2",
      "topic":"Homeostasis",
      "paper":"0610/42",
      "session":"Oct/Nov 2019",
      "qnum":"Q14",
      "question":"What happens when body temperature rises above normal?",
      "choices":["Shivering","Vasodilation","Vasoconstriction","Decreased sweating"],
      "answer":1,
      "explanation":"Vasodilation increases blood flow to the skin to release heat.",
      "tags":["homeostasis","temperature"]
    },
    {
      "id":"bio-eco-1",
      "topic":"Ecology & Environment",
      "paper":"0610/22",
      "session":"May/Jun 2020",
      "qnum":"Q15",
      "question":"Which gas contributes most to global warming?",
      "choices":["Oxygen","Carbon dioxide","Nitrogen","Hydrogen"],
      "answer":1,
      "explanation":"Carbon dioxide is a greenhouse gas responsible for global warming.",
      "tags":["environment","climate"]
    },
    {
      "id":"bio-eco-2",
      "topic":"Ecology & Environment",
      "paper":"0610/21",
      "session":"Oct/Nov 2021",
      "qnum":"Q16",
      "question":"Which process returns carbon dioxide to the atmosphere?",
      "choices":["Photosynthesis","Respiration","Condensation","Absorption"],
      "answer":1,
      "explanation":"Respiration releases carbon dioxide back into the atmosphere.",
      "tags":["carbon cycle","respiration"]
    }
  ]
}</script>



  <script>
    // --- Helpers ---
    const $ = (sel, root=document) => root.querySelector(sel);
    const $$ = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    const state = {
      allQuestions: [],
      picked: [],
      cursor: 0,
      correct: 0,
      streak: 0,
      startTime: 0,
      endTime: 0,
      mode: 'practice',
      timer: null,
      timeLeft: 0,
      answers: [] // {id, choice, correct}
    };

    const topicsPreferred = [
  "Cell Biology",
  "Enzymes",
  "Photosynthesis",
  "Respiration",
  "Genetics",
  "Human Reproduction",
  "Homeostasis",
  "Ecology & Environment"
];



    function loadBanks(){
      try {
        const base = JSON.parse(document.getElementById('question-bank').textContent);
        const demo = JSON.parse(document.getElementById('demo-bank').textContent);
        state.allQuestions = [].concat(base.questions);
        if($('#demoToggle').checked){ state.allQuestions = state.allQuestions.concat(demo.questions); }
      } catch(e){ console.error(e); }
    }

    function renderTopicOptions(){
      const sel = document.getElementById('topic');
      sel.innerHTML = '<option value="all">All topics</option>';
      const topics = [...new Set(state.allQuestions.map(q=>q.topic))];
      topicsPreferred.concat(topics).filter((v,i,self)=>self.indexOf(v)===i).forEach(t=>{
        if(!t) return; const opt=document.createElement('option'); opt.value=t; opt.textContent=t; sel.appendChild(opt);
      });
    }

    function shuffle(arr){
      for(let i=arr.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [arr[i],arr[j]]=[arr[j],arr[i]]; }
      return arr;
    }

    function startQuiz(){
      const topic = document.getElementById('topic').value;
      const count = Math.max(1, Math.min(50, parseInt(document.getElementById('count').value||'10')));
      const minutes = Math.max(0, parseInt(document.getElementById('minutes').value||'0'));
      state.mode = document.getElementById('mode').value;
      const shuffleChoices = document.getElementById('shuffleChoices').checked;

      loadBanks();
      renderTopicOptions();

      let pool = state.allQuestions.filter(q=> topic==='all' ? true : q.topic===topic);
      pool = shuffle([...pool]);
      state.picked = pool.slice(0, count).map(q=> ({...q, choices:[...q.choices]}));

      if(shuffleChoices){
        state.picked.forEach(q=>{
          const correctText = q.choices[q.answer];
          shuffle(q.choices);
          q.answer = q.choices.indexOf(correctText);
        });
      }

      state.cursor = 0; state.correct = 0; state.streak = 0; state.answers = [];
      state.startTime = Date.now();
      state.endTime = minutes>0 ? state.startTime + minutes*60*1000 : 0;
      clearInterval(state.timer);
      if(minutes>0){
        state.timeLeft = minutes*60;
        state.timer = setInterval(()=>{
          state.timeLeft--; updateTimer(); if(state.timeLeft<=0){ clearInterval(state.timer); finishQuiz(); }
        }, 1000);
      } else { state.timeLeft = 0; updateTimer(); }

      renderQuestion();
      updateStats();
      document.getElementById('finish').classList.add('hidden');
      document.getElementById('quiz').scrollIntoView({behavior:'smooth'});
    }

    function updateTimer(){
      const el = document.getElementById('statTime');
      if(state.endTime===0){ el.textContent = 'âˆž'; return; }
      const m = Math.max(0, Math.floor(state.timeLeft/60)).toString().padStart(2,'0');
      const s = Math.max(0, state.timeLeft%60).toString().padStart(2,'0');
      el.textContent = `${m}:${s}`;
    }

    function updateStats(){
      const scorePct = state.picked.length ? Math.round(100*state.correct/state.picked.length) : 0;
      document.getElementById('statScore').textContent = scorePct + '%';
      document.getElementById('statProgress').textContent = `${Math.min(state.cursor+1, state.picked.length)}/${state.picked.length}`;
      document.getElementById('statStreak').textContent = `${state.streak}ðŸ”¥`;
    }

    function renderQuestion(){
      const wrap = document.getElementById('quiz');
      wrap.innerHTML = '';
      if(state.cursor >= state.picked.length){ finishQuiz(); return; }
      const q = state.picked[state.cursor];

      const card = document.createElement('div');
      card.className = 'glass p-6 rounded-2xl ring-1 ring-white/10 shadow-xl';

      const meta = document.createElement('div');
      meta.className = 'flex items-start gap-3 flex-wrap';
      meta.innerHTML = `<div class="text-xs px-2 py-1 bg-white/10 rounded">${q.topic||'â€”'}</div>` +
        (q.paper? `<div class="text-[10px] px-2 py-1 bg-white/5 rounded border border-white/10">Paper: ${q.paper||''} ${q.session? 'â€¢ '+q.session: ''} ${q.qnum? 'â€¢ '+q.qnum: ''}</div>`:'' );
      card.appendChild(meta);

      const h3 = document.createElement('h3');
      h3.className = 'mt-2 text-lg font-semibold';
      h3.textContent = q.question;
      card.appendChild(h3);

      if(q.image){
        const img = document.createElement('img');
        img.src = q.image; img.alt='Question figure';
        img.className = 'mt-3 rounded-xl max-h-60 object-contain ring-1 ring-white/10';
        card.appendChild(img);
      }

      const list = document.createElement('div');
      list.className = 'mt-4 grid gap-3';

      q.choices.forEach((c,idx)=>{
        const btn = document.createElement('button');
        btn.className = 'option text-left px-4 py-3 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition';
        btn.innerHTML = `<span class='font-semibold mr-2'>${String.fromCharCode(65+idx)}.</span> ${c}`;
        btn.addEventListener('click', ()=> selectChoice(idx));
        list.appendChild(btn);
      });
      card.appendChild(list);

      const actions = document.createElement('div');
      actions.className = 'mt-4 flex items-center gap-3';
      const skip = document.createElement('button');
      skip.className = 'px-3 py-2 rounded-xl bg-white/10 hover:bg-white/20';
      skip.textContent = 'Skip';
      skip.addEventListener('click', ()=>{ recordAnswer(null,false); nextQuestion(); });

      const reveal = document.createElement('button');
      reveal.className = 'px-3 py-2 rounded-xl bg-white/10 hover:bg-white/20';
      reveal.textContent = 'Show Explanation';
      reveal.addEventListener('click', ()=> showExplain(q, null));

      actions.appendChild(skip);
      actions.appendChild(reveal);
      card.appendChild(actions);

      wrap.appendChild(card);

      function selectChoice(idx){
        const nodes = $$('.option', card);
        nodes.forEach(n=> n.disabled = true);
        const correct = idx===q.answer;
        nodes[idx].classList.add(correct? 'choice-correct' : 'choice-wrong');
        nodes[q.answer].classList.add('choice-correct');
        recordAnswer(idx, correct);
        if(state.mode==='practice') showExplain(q, correct);
        setTimeout(()=> nextQuestion(), 900);
      }
    }

    function showExplain(q){
      const box = document.createElement('div');
      box.className = 'mt-3 p-3 rounded-xl bg-black/30 border border-white/10';
      box.innerHTML = `<div class='font-semibold mb-1'>Explanation</div><div class='text-sm text-slate-200'>${q.explanation||'-'}</div>`;
      document.getElementById('quiz').firstChild.appendChild(box);
    }

    function recordAnswer(choice, correct){
      if(correct){ state.correct++; state.streak++; }
      else { state.streak = 0; }
      const q = state.picked[state.cursor];
      state.answers.push({id:q.id, topic:q.topic, choice, correct, key:q.answer});
      updateStats();
    }

    function nextQuestion(){
      state.cursor++;
      if(state.cursor < state.picked.length){ renderQuestion(); }
      else { finishQuiz(); }
    }

    function finishQuiz(){
      clearInterval(state.timer);
      const wrap = document.getElementById('finish');
      wrap.classList.remove('hidden');
      const pct = Math.round(100*state.correct/state.picked.length);
      const timeUsed = Math.round((Date.now()-state.startTime)/1000);
      const mm = String(Math.floor(timeUsed/60)).padStart(2,'0');
      const ss = String(timeUsed%60).padStart(2,'0');
      document.getElementById('summary').textContent = `Score: ${pct}% | Correct ${state.correct} out of ${state.picked.length} | Time: ${mm}:${ss}`;
      const data = {summary:{score:pct, correct:state.correct, total:state.picked.length, time:timeUsed}, answers:state.answers, picked:state.picked.map(q=>({id:q.id, topic:q.topic, paper:q.paper, session:q.session, qnum:q.qnum}))};
      document.getElementById('exportArea').textContent = JSON.stringify(data,null,2);

      document.getElementById('reviewBtn').onclick = ()=> renderReview();
      document.getElementById('restartBtn').onclick = ()=> startQuiz();
    }

    function renderReview(){
      const wrap = document.getElementById('quiz');
      wrap.innerHTML = '';
      state.picked.forEach((q,i)=>{
        const card = document.createElement('div');
        card.className = 'glass p-6 rounded-2xl ring-1 ring-white/10 shadow-xl mb-4';
        const ans = state.answers[i];
        card.innerHTML = `<div class='text-xs px-2 py-1 bg-white/10 rounded inline-block mb-2'>${q.topic||'â€”'}</div>`+
          (q.paper? `<div class='text-[10px] px-2 py-1 bg-white/5 rounded border border-white/10 ml-2 inline-block'>Paper: ${q.paper||''} ${q.session? 'â€¢ '+q.session: ''} ${q.qnum? 'â€¢ '+q.qnum: ''}</div>`: '')+
          `<div class='text-sm text-slate-300 mb-2'></div>
          <h3 class='text-lg font-semibold mb-2'>${q.question}</h3>`;
        const list = document.createElement('div');
        list.className = 'grid gap-2';
        q.choices.forEach((c,idx)=>{
          const div = document.createElement('div');
          div.className = 'px-4 py-3 rounded-xl border';
          div.classList.add(idx===q.answer ? 'choice-correct' : (ans.choice===idx ? 'choice-wrong' : 'border-white/10 bg-white/5'));
          div.innerHTML = `<span class='font-semibold mr-2'>${String.fromCharCode(65+idx)}.</span> ${c}`;
          list.appendChild(div);
        });
        card.appendChild(list);
        const box = document.createElement('div');
        box.className = 'mt-3 p-3 rounded-xl bg-black/30 border border-white/10 text-sm';
        box.innerHTML = `<div class='font-semibold mb-1'>Explanation</div>${q.explanation||'-'}`;
        card.appendChild(box);
        wrap.appendChild(card);
      });
      document.getElementById('finish').scrollIntoView({behavior:'smooth'});
    }

    function loadFromFile(){
      const input = document.getElementById('file');
      const file = input.files?.[0];
      if(!file) return alert('Choose a JSON file first.');
      const reader = new FileReader();
      reader.onload = (e)=>{
        try{
          const json = JSON.parse(e.target.result);
          if(!json.questions || !Array.isArray(json.questions)) throw new Error('Invalid JSON structure.');
          json.questions.forEach((q,idx)=>{
            if(!q.id || !q.topic || !q.question || !Array.isArray(q.choices) || typeof q.answer!=="number"){
              throw new Error(`Question at index ${idx} is invalid.`);
            }
          });
          const base = JSON.parse(document.getElementById('question-bank').textContent);
          base.questions = base.questions.concat(json.questions);
          document.getElementById('question-bank').textContent = JSON.stringify(base);
          alert(`Loaded ${json.questions.length} question(s).`);
          loadBanks();
          renderTopicOptions();
        } catch(err){ alert('Failed to load: '+ err.message); }
      };
      reader.readAsText(file);
    }

    function toggleTheme(){
      document.body.classList.toggle('bg-slate-50');
      document.body.classList.toggle('text-slate-900');
    }

    // Init
    document.getElementById('start').addEventListener('click', startQuiz);
    document.getElementById('loadFile').addEventListener('click', loadFromFile);
    document.getElementById('btnTheme').addEventListener('click', toggleTheme);
    document.getElementById('demoToggle').addEventListener('change', ()=>{ loadBanks(); renderTopicOptions(); });
    document.getElementById('year').textContent = new Date().getFullYear();

    // First load
    loadBanks();
    renderTopicOptions();
  </script>
</body>
</html>
